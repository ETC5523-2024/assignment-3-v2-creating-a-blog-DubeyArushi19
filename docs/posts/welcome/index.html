<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.555">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Arushi Dubey">
<meta name="dcterms.date" content="2024-10-06">

<title>My Analytical Story - Understanding the Economic Impact of Tourism on Australia’s GDP (2008-2022)</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">My Analytical Story</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/etc5523-2022"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Understanding the Economic Impact of Tourism on Australia’s GDP (2008-2022)</h1>
                                <div class="quarto-categories">
                <div class="quarto-category">news</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Arushi Dubey </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">October 6, 2024</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<p><img src="pictures.webp" class="img-fluid"></p>
<p><strong>Introduction</strong></p>
<p>Tourism has long been a significant driver of economic growth and employment in Australia. With its stunning natural landscapes and vibrant cities, the country has been a popular destination for international and domestic travelers alike. However, the past decade has seen major disruptions, with the COVID-19 pandemic causing an unprecedented decline in the tourism sector’s contribution to the national economy.</p>
<p>In this post, we analyze how tourism’s share of Australia’s Gross Domestic Product (GDP) has evolved from 2008 to 2022. We will look at the trends, the pandemic’s impact, and the subsequent recovery to understand the resilience and vulnerabilities of the tourism industry.</p>
<p><strong>Problem Description</strong></p>
<p>Tourism plays a crucial role in Australia’s economy, contributing significantly to its Gross Domestic Product (GDP), job creation, and regional development. However, the tourism industry is highly sensitive to global changes, such as economic downturns and pandemics. Analyzing the industry’s contribution to GDP helps us understand its strengths and weaknesses, allowing policymakers and stakeholders to strategize effectively.</p>
<p>This blog post examines the trends in tourism’s contribution to Australia’s GDP from 2008 to 2022, focusing on the dramatic decline caused by the COVID-19 pandemic and the subsequent recovery. The analysis sheds light on how global events can influence tourism and what can be done to ensure its long-term stability.</p>
<p><strong>Data Source</strong></p>
<ul>
<li><p>The data for this analysis was sourced from a website <a href="https://ourworldindata.org/">Our World in Data</a> specifically focusing on the proportion of GDP from tourism for various countries between 2008 and 2022.</p></li>
<li><p>The dataset includes fields such as country name, year, and the percentage of GDP that comes from tourism.</p></li>
</ul>
<p><strong>Data Dictionary</strong></p>
<ul>
<li><p><strong>Entity</strong>: The name of the country being analyzed for its tourism-related GDP.</p></li>
<li><p><strong>Code</strong>: A standardized abbreviation or code representing the country, often used in data systems.</p></li>
<li><p><strong>Year</strong>: The specific year in which the data point was recorded or reported.</p></li>
<li><p><strong>GDP from tourism as a share of total GDP</strong>: The percentage of a country’s Gross Domestic Product that is generated from tourism activities relative to its total GDP.</p></li>
</ul>
<p><strong>Details of the Work</strong></p>
<ul>
<li><p><strong>Step 1</strong> : <strong>Data Cleaning and Preparation</strong> The initial dataset was meticulously filtered to exclusively highlight Australia’s tourism sector. This involved isolating data points specific to Australia while discarding irrelevant entries.</p></li>
<li><p><strong>Step 2</strong> : <strong>Handling Missing Values</strong> The dataset was reviewed for missing values to ensure completeness. Instances of missing data were addressed through interpolation for continuity wherever feasible. For critical data points that could not be reliably estimated, those entries were removed to maintain the overall integrity and consistency of the dataset. This careful handling of missing values ensured that the analysis was based on reliable and complete information.</p></li>
<li><p><strong>Step 3</strong> : <strong>Exploratory Data Analysis (EDA)</strong> Comprehensive descriptive statistics were calculated to gain insights into the data’s distribution, variability, and underlying patterns. This step was crucial for identifying any trends or anomalies within the dataset, thereby confirming its suitability for deeper analytical processes. Visualizations such as histograms and box plots were employed to illustrate the distribution and assess the presence of outliers.</p></li>
<li><p><strong>Step 4</strong> : <strong>Trend Analysis</strong> A line chart was created to effectively visualize the trends in tourism’s contribution to Australia’s GDP from 2008 to 2022. This chart highlighted key phases: steady growth leading up to 2019, a dramatic decline during the pandemic years, and a tentative recovery in 2021-2022. The trends illustrated in the chart serve to encapsulate the impact of global events on the tourism sector, as referenced in <a href="#fig-1" class="quarto-xref">Figure&nbsp;1</a>.</p></li>
<li><p><strong>Step 5</strong> : <strong>Contextual and Comparative Analysis</strong> The analysis delved into the contextual backdrop of the observed trends, linking them to significant global events such as the COVID-19 pandemic. By comparing the post-pandemic recovery trajectory with the pre-pandemic stability, the analysis provides critical insights for policymakers and stakeholders, highlighting the need for strategic interventions to bolster the tourism sector’s resilience and adaptability in the face of future challenges.</p></li>
</ul>
<p><strong>Analysis</strong></p>
<p>The graph captures several notable trends and turning points during this period, reflecting both global and domestic events that have influenced the tourism sector’s economic significance in the country.</p>
<p><strong>1. Initial Stability (2008–2012)</strong>: The share of GDP from tourism exhibited a relatively stable trend between 2008 and 2012, fluctuating slightly between 3.0% and 3.4%. This period reflects a post-Global Financial Crisis (GFC) recovery phase for the global economy, during which Australia’s tourism sector was somewhat resilient. This stability can be attributed to Australia’s strong economic fundamentals at the time and the continuous demand for inbound tourism, particularly from Asian markets like China and Japan. Moreover, domestic tourism remained strong, supporting the sector’s steady contribution to GDP.</p>
<p><strong>2. Growth Phase (2013–2017)</strong>: From 2013 to 2017, the share of tourism in GDP saw a gradual increase, peaking at around 3.7% in 2016-2017. This period of growth coincided with the Australian government’s strategic focus on tourism as a key economic driver, coupled with the depreciation of the Australian dollar, which made the country a more affordable destination for international visitors. Additionally, Australia’s tourism infrastructure development and successful marketing campaigns (e.g., “There’s Nothing Like Australia”) helped attract a growing number of high-spending tourists, particularly from China and India.</p>
<p><strong>3. Stagnation and Decline (2018–2020)</strong>: The period between 2018 and early 2020 was marked by a slight decline in tourism’s contribution to GDP. This was due to a range of factors, including a stronger Australian dollar, which reduced the competitiveness of Australia as a travel destination, and a plateauing in the growth rate of international visitor arrivals. Notably, the catastrophic bushfires in 2019-2020 severely impacted regional tourism, leading to cancellations and a reduction in tourism expenditure.</p>
<p><strong>4. COVID-19 Pandemic Impact (2020–2022)</strong>: The most significant disruption in the timeline is observed during the years 2020 and 2021, where the share of tourism in GDP fell sharply to around 2.7%—a historic low in the past 15 years. This decline is directly attributed to the impact of the COVID-19 pandemic, which led to international border closures, lockdowns, and restrictions on domestic travel. Tourism was one of the hardest-hit sectors, with international visitor numbers dropping by over 99% in some months and domestic tourism plummeting due to state-level restrictions. The sharp downturn in tourism’s share of GDP reflects these unprecedented conditions.</p>
<p><strong>5. Post-Pandemic Recovery and Uncertainty (2022)</strong>: By 2022, there is a slight uptick in the proportion of GDP from tourism, indicating a slow recovery as international borders reopened and domestic travel resumed. However, the recovery is uneven, with some regions and sectors (e.g., business travel) lagging behind others (e.g., leisure tourism). While the slight increase is a positive sign, the overall share remains below pre-pandemic levels, suggesting that the tourism sector still faces challenges in returning to its former economic prominence.</p>
<p>It illustrates a relatively stable period from 2008 to 2018, followed by a sharp decline during the COVID-19 pandemic years (2019-2020) and a gradual recovery starting in 2021.</p>
<ol type="1">
<li><strong>Visual Analysis of Tourism’s Contribution to GDP</strong></li>
</ol>
<div class="cell">
<div class="cell-output-display">
<div id="fig-1" class="quarto-figure quarto-figure-center quarto-float anchored" width="672">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="index_files/figure-html/fig-1-1.png" id="fig-1" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig quarto-uncaptioned" id="fig-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;1
</figcaption>
</figure>
</div>
</div>
</div>
<ol start="2" type="1">
<li><strong>Tabular Analysis of Key Data Points</strong></li>
</ol>
<p>The table below <span class="citation" data-cites="table-1">@table-1</span> presents a summary of key data points that highlight the trends in tourism’s contribution to GDP:</p>
<div class="cell">
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<caption>Table 1: Key Events Impacting Tourism’s Contribution to GDP in Australia (2008-2022)</caption>
<colgroup>
<col style="width: 5%">
<col style="width: 33%">
<col style="width: 61%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: right;">Year</th>
<th style="text-align: right;">Tourism GDP as % of Total GDP</th>
<th style="text-align: left;">Key Events</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">2008</td>
<td style="text-align: right;">2.9</td>
<td style="text-align: left;">Global Financial Crisis impact</td>
</tr>
<tr class="even">
<td style="text-align: right;">2015</td>
<td style="text-align: right;">3.1</td>
<td style="text-align: left;">Tourism growth due to increased international arrivals</td>
</tr>
<tr class="odd">
<td style="text-align: right;">2019</td>
<td style="text-align: right;">2.4</td>
<td style="text-align: left;">Decline before the pandemic</td>
</tr>
<tr class="even">
<td style="text-align: right;">2020</td>
<td style="text-align: right;">1.4</td>
<td style="text-align: left;">Impact of COVID-19 pandemic</td>
</tr>
<tr class="odd">
<td style="text-align: right;">2022</td>
<td style="text-align: right;">2.5</td>
<td style="text-align: left;">Initial recovery phase</td>
</tr>
</tbody>
</table>
</div>
</div>
<p><strong>Conclusion</strong></p>
<p>Tourism’s contribution to Australia’s GDP has seen considerable fluctuations over the period from 2008 to 2022. While the sector experienced growth from 2015 to 2018, the sharp decline in 2020 due to the COVID-19 pandemic had a profound impact on its economic contribution. The slight recovery in 2022 suggests that with strategic support, the tourism sector can regain its position as a significant economic driver.</p>
<p>Future strategies should focus on diversifying tourism offerings, enhancing marketing efforts, and building infrastructure to support a resilient tourism industry capable of withstanding global disruptions.</p>
<p><strong>Reference</strong></p>
<ul>
<li>UNWTO (2024) – processed by Our World in Data. “Share of tourism in total GDP” [dataset]. UNWTO, “Tourism direct GDP as a proportion of total GDP” [original data]. Retrieved September 5, 2024 from https://ourworldindata.org/grapher/tourism-gdp-proportion-of-total-gdp</li>
</ul>



</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>